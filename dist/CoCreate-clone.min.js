!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CoCreateClone=t():e.CoCreateClone=t()}(this,function(){return(()=>{"use strict";var n={790:(e,t,n)=>{n.d(t,{default:()=>o});t={__cloneBtnClass:"cloneBtn",__deleteBtnClass:"deleteBtn",init:function(){this.__initButtonEvent()},__initButtonEvent:function(){},cloneElement:function(e){var t,n=e.getAttribute("data-clone_id"),o=e.getAttribute("data-clone_name"),a=e.getAttribute("data-clone_position")||"before";n&&((e=document.getElementById(o))&&(t=e.value||""),(o=document.getElementById(n))&&((e=o.cloneNode(!0)).classList.contains("template")&&e.classList.remove("template"),e.classList.add("clonedItem"),e.removeAttribute("data-pass_value_id"),e.querySelectorAll("*").forEach(function(e){e.removeAttribute("data-pass_value_id")}),t=this.__getNewPrefix(t),this.__createDynamicCloneId(e,t),this.__createDnDElementId(e),"after"===a?o.nextSibling?o.parentNode.insertBefore(e,o.nextSibling):o.parentNode.appendChild(e):o.parentNode.insertBefore(e,o),(t=CoCreateHtmlTags.findElementByChild(e))&&this.__sendMessageOfClone(t,e,n,a),document.dispatchEvent(new CustomEvent("change-content",{detail:{element:e,type:"clone-create"}})),o.parentNode.dispatchEvent(new CustomEvent("CoCreate-clone",{detail:{type:"create"}})),document.dispatchEvent(new CustomEvent("clone-cloned",{detail:{element:e}}))))},deleteElement:function(e){var t=e.getAttribute("data-clone_id"),n=document.getElementById(t);n&&(e=n.parentNode,n.remove(),this.__sendMessageOfDelete(t),e&&(document.dispatchEvent(new CustomEvent("change-content",{detail:{element:e,type:"clone-delete"}})),e.dispatchEvent(new CustomEvent("CoCreate-clone",{detail:{type:"delete"}}))),document.dispatchEvent(new CustomEvent("clone-deleted",{detail:{}})))},__createDynamicCloneId:function(r,i){var l=this,e=r.querySelectorAll("*"),t=r.querySelectorAll("."+this.__cloneBtnClass),n=r.querySelectorAll("."+this.__deleteBtnClass);(e=Array.from(e)).push(r),r.setAttribute("id",i),e.forEach(function(e){for(var t=e.tagName.toLowerCase(),n=0;n<e.attributes.length;n++){var o=e.attributes[n],a=o.name,o=o.value,r=o.replace(/{{\s*clone-name\s*}}/g,i);if(/{{\s*clone-name\s*}}/g.test(o)&&"value"==a)switch(t){case"input":e.setAttribute("value",r);break;case"textarea":e.setAttribute("value",r),e.textContent=r;break;default:e.innerHTML=r}e.setAttribute(a,r)}}),t.forEach(function(e){var t,n,o=e.getAttribute("data-clone_id"),a=e.getAttribute("data-clone_name");o&&(t=r.querySelector("#".concat(o)),n=l.__setAttribute(e,"data-clone_id",o,i),t&&(t.id=n)),a&&(n=r.querySelector("#".concat(a)),a=l.__setAttribute(e,"data-clone_name",a,i),n&&(n.id=a))}),n.forEach(function(e){e.getAttribute("data-clone_id")&&e.setAttribute("data-clone_id",i)})},__getOriginal:function(e){var t=e,n=e.indexOf("_");return t=-1<n?e.substring(n+1):t},__setAttribute:function(e,t,n,o){n=this.__getOriginal(n),n=""==o?n:"".concat(o,"_").concat(n);return e.setAttribute(t,n),n},__createDnDElementId:function(e){document.querySelectorAll('[data-draggable="true"], [data-droppable="true"]').forEach(function(e){e.setAttribute("data-element_id",CoCreateUtils.generateUUID())}),"true"!=e.getAttribute("data-draggable")&&"true"!=e.getAttribute("data-droppable")||e.setAttribute("data-element_id",CoCreateUtils.generateUUID())},__getNewPrefix:function(t){var e=document.querySelectorAll(".clonedItem"),n=!1;return e.forEach(function(e){e=e.getAttribute("prefix");t==e&&(n=!0)}),n||!t?CoCreateUtils.generateUUID(12):t},__sendMessageOfClone:function(e,t,n,o){var a=e.getAttribute("data-document_id")||"",r=e.getAttribute("name")||"",e="";a&&(e="[data-document_id='".concat(a,"']"),r&&(e+="[name='".concat(r,"']")),r={},r="after"==o?{afterend:t.outerHTML}:{beforebegin:t.outerHTML},r={selector_type:"querySelector",selector:"div.domEditor".concat(e," #").concat(n,".template"),method:"insertAdjacentHTML",value:r},CoCreate.sendMessage({rooms:[],emit:{message:"domEditor",data:r}}))},__sendMessageOfDelete:function(e){e={selector_type:"getElementById",selector:e,method:"remove"};CoCreate.sendMessage({rooms:[],emit:{message:"domEditor",data:e}})}};t.init(),CoCreateAction.registerEvent("cloneAction",t.cloneElement,t,"clone-cloned"),CoCreateAction.registerEvent("createClone",t.cloneElement,t,"clone-cloned"),CoCreateAction.registerEvent("deleteClone",t.deleteElement,t,"clone-deleted");const o=t}},o={};function a(e){if(o[e])return o[e].exports;var t=o[e]={exports:{}};return n[e](t,t.exports,a),t.exports}return a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a(790)})().default});